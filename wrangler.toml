name = "whatismyip"
main = "build/worker/shim.mjs"
compatibility_date = "2023-12-01"

[build]
command = "cargo install -q worker-build && worker-build --release"

[build.upload]
format = "modules"
dir = "build"
main = "./worker/shim.mjs"

[[build.upload.rules]]
type = "CompiledWasm"
globs = ["**/*.wasm"]

[[kv_namespaces]]
binding = "IP_STORE"
id = "00000000000000000000000000000000"
preview_id = "00000000000000000000000000000000"

[env.production.vars]
# Set API_TOKEN as a secret in Cloudflare dashboard or via wrangler secret put API_TOKEN
CF_ZONE_ID = "00000000000000000000000000000000"
