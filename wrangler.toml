name = "whatismyip"
main = "build/worker/shim.mjs"
compatibility_date = "2023-12-01"

[build]
command = "cargo install -q worker-build && worker-build --release"

[build.upload]
format = "modules"
dir = "build"
main = "./worker/shim.mjs"

[[build.upload.rules]]
type = "CompiledWasm"
globs = ["**/*.wasm"]

[[kv_namespaces]]
binding = "IP_STORE"
id = "00000000000000000000000000000000"
preview_id = "00000000000000000000000000000000"

[env.production.vars]
# Environment variables loaded from .env file or set via wrangler secret
# Copy .env.example to .env and fill in your actual values
CF_ZONE_ID = { env = "CF_ZONE_ID" }
CF_DOMAIN = { env = "CF_DOMAIN" }
